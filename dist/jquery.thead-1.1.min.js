/* * jQuery Thead Plugin v1.1 * http://www.asual.com/jquery/thead/ * * Copyright (c) 2009-2010 Rostislav Hristov * Dual licensed under the MIT or GPL Version 2 licenses. * http://jquery.org/license * * Date: 2010-03-02 09:34:29 +0200 (Tue, 02 Mar 2010) */(function(i){var d="class",g="cellpadding",a="cellspacing",j=navigator.userAgent,m=i(window),k=i(document),f=[],h=4,e=!(i.browser.msie&&parseFloat(j.substr(j.indexOf("MSIE")+h))<7),c=null,l=function(o){var n=parseInt(o,10);return isNaN(n)?0:n},b=function(){i(f).each(function(){var n,q="thead tr th, thead tr td",p=i("table.jquery-thead, table",this.parent().prev()).get(0),v=i("caption",p),u=i(p).css("border-collapse")=="collapse",o=i(q,p),r=k.scrollTop()-i(p).offset().top+h;if(v.length){r-=v.get(0).clientHeight}i(q,this).each(function(s){var t=o.eq(s).get(0);n=i(t).css("width");i(this).css("width",n!="auto"?n:t.clientWidth-l(i(t).css("padding-left"))-l(i(t).css("padding-right"))+"px")});i(this).css({display:(r>h&&r<p.clientHeight-i("tr:last",p).height()-h*2)?i(p).css("display"):"none",left:i(p).offset().left-k.scrollLeft()+"px",width:i(p).get(0).offsetWidth})})};i(function(){if(e){m.scroll(b).resize(function(){if(c==null){c=setInterval(function(){if(c){c=clearInterval(c)}b()},50)}});i("table.jquery-thead, .jquery-thead table").thead()}});i.thead=(function(){return{update:function(){i(f).each(function(){var o=i("thead",i("table.jquery-thead, table",this.parent().prev()).get(0));var n=i("thead",this);if(n.html()!=o.html()){n.parent().append(o.clone(true));n.remove();b()}})}}})();i.fn.thead=function(){if(e){var n=i(this);n.each(function(){var r,q=i(this).parent(),s=i("thead",this);if(s.length){var o=i(this).attr(d),t=i(this).attr(g),p=i(this).attr(a),r=i("<table />").attr(d,o).attr(g,t?t:1).attr(a,p?p:2).css({position:"fixed",top:0}).appendTo(i("<"+q.get(0).tagName+"/>").attr(d,q.attr(d)).insertAfter(q));f.push(r.append(i(s).clone(true)))}})}b()}})(jQuery);